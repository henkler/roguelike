!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(10)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=t.EntityType={player:0,boss:1,enemy:2,weapon:3,potion:4},a=function(){function e(t,i,r,a){n(this,e),this._game=t,this.name=i,this.type=r,this.tile=a,this.tile.entity=this}return i(e,[{key:"_interactWithEntity",value:function(){return!1}},{key:"_moveToTile",value:function(e){e.hasEntity&&!this._interactWithEntity(e.entity)||(this.tile.entity=null,this.tile=e,this.tile.entity=this)}},{key:"x",get:function(){return this.tile.x}},{key:"y",get:function(){return this.tile.y}},{key:"displayChar",get:function(){switch(this.type){case r.player:return"@";case r.boss:return"B";case r.enemy:return this.level.toString();case r.weapon:return"!";case r.potion:return"%";default:return"_"}}},{key:"typeName",get:function(){switch(this.type){case r.player:return"player";case r.boss:return"boss";case r.enemy:return"enemy";case r.weapon:return"weapon";case r.potion:return"potion";default:return null}}},{key:"isPlayer",get:function(){return this.type===r.player}},{key:"isEnemy",get:function(){return this.type===r.enemy}},{key:"isBoss",get:function(){return this.type===r.boss}},{key:"isWeapon",get:function(){return this.type===r.weapon}},{key:"isPotion",get:function(){return this.type===r.potion}}]),e}();t["default"]=a},function(e,t){e.exports=React},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=p[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(u(i.parts[a],t))}else{for(var o=[],a=0;a<i.parts.length;a++)o.push(u(i.parts[a],t));p[i.id]={id:i.id,refs:1,parts:o}}}}function r(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i],a=r[0],o=r[1],s=r[2],l=r[3],u={css:o,media:s,sourceMap:l};n[a]?n[a].parts.push(u):t.push(n[a]={id:a,parts:[u]})}return t}function a(e,t){var n=_(),i=m[m.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),m.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=m.indexOf(e);t>=0&&m.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",a(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",a(e,t),t}function u(e,t){var n,i,r;if(t.singleton){var a=v++;n=g||(g=s(t)),i=c.bind(null,n,a,!1),r=c.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),i=h.bind(null,n),r=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),i=f.bind(null,n),r=function(){o(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function c(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function f(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function h(e,t){var n=t.css,i=t.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(r),a&&URL.revokeObjectURL(a)}var p={},y=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},d=y(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),_=y(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,v=0,m=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=d()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=r(e);return i(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var s=n[o],l=p[s.id];l.refs--,a.push(l)}if(e){var u=r(e);i(u,t)}for(var o=0;o<a.length;o++){var l=a[o];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete p[l.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(6),u=i(l),c=n(1),f=4,h=10,p=20,y=function(e){function t(e,n,i){r(this,t);var o=e.map.getRandomEmptyTile(),s=a(this,Object.getPrototypeOf(t).call(this,e,n,c.EntityType.enemy,o,f,i));return s.xp=p*s.level,s.health=h*s.level,s}return o(t,e),s(t,[{key:"move",value:function(){this.isDead||(this._game.player.tile.distanceTo(this.startTile)<=this.range?this._game.pathfinder.findPathToPlayer(this,this._pathFinderCallback.bind(this)):this._moveRandomlyInRange())}},{key:"die",value:function(){this.tile.entity=null,this._game.player.addXP(this.xp),this._game.storeMessage("ATTACK: "+this.name+" is now dead.")}},{key:"_interactWithEntity",value:function(e){if(e.isPlayer){var t=this.attackDamage;this.attack(e,t)}return!1}},{key:"_pathFinderCallback",value:function(e){var t=null;null!==e&&0!==e.length&&(t=this._game.map.getTile(e[1].x,e[1].y),t&&this._moveToTile(t))}},{key:"_moveRandomlyInRange",value:function(){for(var e=[],t=this.x-1;t<=this.x+1;t++)for(var n=this.y-1;n<=this.y+1;n++)if(t!==this.x||n!==this.y){var i=this._game.map.getTile(t,n);i.isOpen&&i.distanceTo(this.startTile)<=this.range&&e.push(i)}if(0!==e.length){var r=e[Math.floor(Math.random()*e.length)];this._moveToTile(r)}}}]),t}(u["default"]),d=[{name:"Feral Ghoul",level:3},{name:"Mireluk",level:2},{name:"Super Mutant",level:5},{name:"Guard dog",level:2},{name:"Mole rat",level:1},{name:"Deathclaw",level:6},{name:"Raider",level:2},{name:"Glowing One",level:3},{name:"Radroach",level:1},{name:"Yao guai",level:2}];y.createRandom=function(e){var t=d[Math.floor(Math.random()*d.length)];return new y(e,t.name,t.level)},t["default"]=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(1),u=i(l),c=10,f=function(e){function t(e,n,i,o,s,l){r(this,t);var u=a(this,Object.getPrototypeOf(t).call(this,e,n,i,o));return u.startTile=o,u.range=s,u.level=l,u.health=0,u.xp=0,u}return o(t,e),s(t,[{key:"move",value:function(e,t){var n=this._getTileForMove(e,t);n&&n.isOpen&&this._moveToTile(n)}},{key:"attack",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];e.handleAttack(this,t,n)}},{key:"handleAttack",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];this._game.storeMessage("ATTACK: "+this.name+" receives "+t+" points of damage from "+e.name),this._takeDamage(t),this.isDead||n||this.attack(e,this.attackDamage,!0)}},{key:"die",value:function(){}},{key:"_takeDamage",value:function(e){e>this.health?this.health=0:this.health-=e,this.isDead?this.die():this.isPlayer||this._game.storeMessage("HP: "+this.name+" has "+this.health+" hit points remaining")}},{key:"_getTileForMove",value:function(e,t){var n=this.x+e,i=this.y+t;return this._game.map.getTile(n,i)}},{key:"isDead",get:function(){return 0===this.health}},{key:"maxDamage",get:function(){return c*this.level}},{key:"attackDamage",get:function(){return Math.ceil(Math.random()*(this.maxDamage/2))+Math.ceil(this.maxDamage/2)}}]),t}(u["default"]);t["default"]=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.GameStatus=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(23),s=i(o),l=n(24),u=i(l),c=n(26),f=i(c),h=n(25),p=i(h),y=n(22),d=i(y),_=n(19),g=i(_),v=n(5),m=i(v),b=n(17),w=i(b),x=n(21),k=i(x),P=n(20),M=i(P),T=n(18),E=i(T),O=150,j=150,S=60,C=30,R=40,N=t.GameStatus={loading:0,playing:1,win:2,lose:3},L=function(){function e(){r(this,e),this._camera=null,this._viewport=null,this._scheduler=null,this._logger=null,this._map=null,this._player=null,this._boss=null,this._pathfinder=null,this._enemyList=null,this._weaponList=null,this._potionList=null,this._status=N.loading,this._init()}return a(e,[{key:"storeMessage",value:function(e){this._logger.storeMessage(e)}},{key:"movePlayer",value:function(e,t){this.isPlaying&&this._player.move(e,t)}},{key:"playerDie",value:function(){this._status=N.lose}},{key:"playerWin",value:function(){this._status=N.win}},{key:"_init",value:function(){this._scheduler=new f["default"](this),this._map=new d["default"](this,O,j),this._player=new g["default"](this),this._camera=new s["default"](this._player),this._viewport=new u["default"](this,this._map,this._camera),this._logger=new p["default"](this),this._boss=new w["default"](this),this._pathfinder=new E["default"](this),this._enemyList=[],this._weaponList=[],this._potionList=[],this._generateWeapons(),this._generatePotions(),this._generateEnemies(),this._status=N.playing,this._introMessage(),this.storeMessage(this._player.name+" awakens in a strange place, naked and afraid.\n")}},{key:"_generateEnemies",value:function(){for(var e=0;S>e;e++)this._enemyList.push(m["default"].createRandom(this))}},{key:"_generatePotions",value:function(){for(var e=0;R>e;e++)this._potionList.push(M["default"].createRandom(this))}},{key:"_generateWeapons",value:function(){for(var e=0;C>e;e++)this._weaponList.push(k["default"].createRandom(this))}},{key:"_introMessage",value:function(){var e=" ______    _______  _______  __   __  _______  ___      ___   ___   _  _______\n|    _ |  |       ||       ||  | |  ||       ||   |    |   | |   | | ||       |\n|   | ||  |   _   ||    ___||  | |  ||    ___||   |    |   | |   |_| ||    ___|\n|   |_||_ |  | |  ||   | __ |  |_|  ||   |___ |   |    |   | |      _||   |___\n|    __  ||  |_|  ||   ||  ||       ||    ___||   |___ |   | |     |_ |    ___|\n|   |  | ||       ||   |_| ||       ||   |___ |       ||   | |    _  ||   |___\n|___|  |_||_______||_______||_______||_______||_______||___| |___| |_||_______|";e+="\n",e+="https://github.com/henkler/roguelike\n",e+="<<explore, collect weapons, collect potions, avoid/kill enemies, level up, kill the boss>>\n",this.storeMessage(e)}},{key:"logger",get:function(){return this._logger}},{key:"camera",get:function(){return this._camera}},{key:"viewport",get:function(){return this._viewport}},{key:"scheduler",get:function(){return this._scheduler}},{key:"map",get:function(){return this._map}},{key:"player",get:function(){return this._player}},{key:"boss",get:function(){return this._boss}},{key:"pathfinder",get:function(){return this._pathfinder}},{key:"status",get:function(){return this._status}},{key:"isPlaying",get:function(){return this._status===N.playing}}]),e}();t["default"]=L},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=t.TileType={wall:0,open:1},a=function(){function e(t,i,r){n(this,e),this._x=t,this._y=i,this._type=r,this._entity=null,this._explored=!1}return i(e,[{key:"setExplored",value:function(){this._explored=!0}},{key:"distanceTo",value:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(Math.pow(t,2)+Math.pow(n,2))}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"displayChar",get:function(){return this.isExplored?this.entity?this.entity.displayChar:this.type===r.wall?"#":".":"?"}},{key:"typeName",get:function(){return this.isExplored?this.entity?this.entity.typeName:this.type===r.wall?"wall":"open":"unexplored"}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"entity",get:function(){return this._entity},set:function(e){this._entity=e}},{key:"isOpen",get:function(){return this.type===r.open}},{key:"isWall",get:function(){return this.type===r.wall}},{key:"isExplored",get:function(){return this._explored}},{key:"hasEntity",get:function(){return null!==this.entity}},{key:"hasPlayer",get:function(){return this.hasEntity&&this.entity.isPlayer}},{key:"hasEnemy",get:function(){return this.hasEntity&&this.entity.isEnemy}},{key:"hasWeapon",get:function(){return this.hasEntity&&this.entity.isWeapon}},{key:"hasPotion",get:function(){return this.hasEntity&&this.entity.isPotion}}]),e}();t["default"]=a},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(2),a=i(r),o=n(9),s=i(o),l=n(16),u=i(l);s["default"].render(a["default"].createElement(u["default"],null),document.getElementById("root"))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=i(r),o=n(14),s=i(o),l=n(13),u=i(l);n(34);var c=function(e){return a["default"].createElement("div",{className:"footer"},a["default"].createElement(s["default"],{player:e.player}),a["default"].createElement(u["default"],{messages:e.logger.messages}))};c.propTypes={player:a["default"].PropTypes.object.isRequired,logger:a["default"].PropTypes.object.isRequired},t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),u=i(l),c=n(15),f=i(c),h=n(7);n(35);var p=function(e){function t(){return r(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"_renderMapTiles",value:function(){for(var e=[],t=this.props.viewport,n=this.props.map,i=t.yMin;i<=t.yMax;i++){for(var r=t.xMin;r<=t.xMax;r++){var a=r+":"+i,o=n.getTile(r,i);e.push(u["default"].createElement(f["default"],{key:a,tile:o}))}var s=i+"_row";e.push(u["default"].createElement("br",{key:s}))}return e}},{key:"_renderModal",value:function(){return this.props.gameStatus===h.GameStatus.win?u["default"].createElement("div",{className:"map-modal"},u["default"].createElement("h1",null,"You Win!")):this.props.gameStatus===h.GameStatus.lose?u["default"].createElement("div",{className:"map-modal"},u["default"].createElement("h1",null,"Game Over!")):null}},{key:"render",value:function(){return u["default"].createElement("div",{className:"map"},this._renderModal(),this._renderMapTiles())}}]),t}(u["default"].Component);p.propTypes={map:u["default"].PropTypes.object.isRequired,viewport:u["default"].PropTypes.object.isRequired,gameStatus:u["default"].PropTypes.number.isRequired},t["default"]=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),u=i(l);n(36);var c=function(e){function t(){return r(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"componentWillUpdate",value:function(){var e=this.refs.message_text_area;this._shouldScrollBottom=e.scrollTop+e.offsetHeight===e.scrollHeight}},{key:"componentDidUpdate",value:function(){if(this._shouldScrollBottom){var e=this.refs.message_text_area;e.scrollTop=e.scrollHeight}}},{key:"render",value:function(){return u["default"].createElement("div",{className:"messagebox"},u["default"].createElement("textarea",{ref:"message_text_area",readOnly:!0,value:this.props.messages}))}}]),t}(u["default"].Component);c.propTypes={messages:u["default"].PropTypes.string.isRequired},t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=i(r);n(37);var o=function(e){return a["default"].createElement("div",{className:"stats-box"},a["default"].createElement("ul",null,a["default"].createElement("li",null,"Health: ",e.player.health),a["default"].createElement("li",null,"Level: ",e.player.level),a["default"].createElement("li",null,"Weapon: ",e.player.weaponName),a["default"].createElement("li",null,"Max Attack: ",e.player.maxDamage),a["default"].createElement("li",null,"XP: ",e.player.xp),a["default"].createElement("li",null,"Next Level: ",e.player.nextLevelXP),a["default"].createElement("li",null,"Position: ",e.player.x,", ",e.player.y),a["default"].createElement("li",null,"Boss: ",e.player.bossXPosition,", ",e.player.bossYPosition)))};o.propTypes={player:a["default"].PropTypes.object.isRequired},t["default"]=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=i(r);n(38);var o=function(e){return a["default"].createElement("div",{className:"tile "+e.tile.typeName},a["default"].createElement("span",null,e.tile.displayChar))};o.propTypes={tile:a["default"].PropTypes.object.isRequired},t["default"]=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),u=i(l),c=n(9),f=i(c),h=n(7),p=i(h),y=n(12),d=i(y),_=n(11),g=i(_);n(39);var v=37,m=38,b=39,w=40,x=500,k=function(e){function t(e){r(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e));return n.resizeHandler=n.handleResize.bind(n),n.keypressHandler=n.handleKeypress.bind(n),n.schedulerTickHandler=n.schedulerTick.bind(n),n.schedulerInterval=null,n.game=new p["default"],n.logger=n.game.logger,n.player=n.game.player,n.scheduler=n.game.scheduler,n.map=n.game.map,n.viewport=n.game.viewport,n.state={game:n.game,map:n.map,logger:n.logger,player:n.player,viewport:n.viewport},n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("keydown",this.keypressHandler),window.addEventListener("resize",this.resizeHandler),this.schedulerInterval=setInterval(this.schedulerTickHandler,x)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keypressHandler),window.removeEventListener("resize",this.resizeHandler),clearInterval(this.schedulerInterval)}},{key:"schedulerTick",value:function(){this.scheduler.tick(),this.updateState()}},{key:"handleResize",value:function(){var e=f["default"].findDOMNode(this.refs.map).clientWidth,t=f["default"].findDOMNode(this.refs.map).clientHeight;this.viewport.setSize(e,t),this.setState({viewport:this.viewport})}},{key:"handleKeypress",value:function(e){var t=0,n=0;switch(e.keyCode){case v:t=-1,this.handlePlayerMove(t,n);break;case m:n=-1,this.handlePlayerMove(t,n);break;case b:t=1,this.handlePlayerMove(t,n);break;case w:n=1,this.handlePlayerMove(t,n)}}},{key:"handlePlayerMove",value:function(e,t){this.game.movePlayer(e,t),this.viewport.update(),this.updateState()}},{key:"updateState",value:function(){this.setState({game:this.game,map:this.map,logger:this.logger,player:this.player,viewport:this.viewport})}},{key:"render",value:function(){return u["default"].createElement("div",{className:"roguelike"},u["default"].createElement(d["default"],{ref:"map",map:this.state.map,viewport:this.state.viewport,gameStatus:this.state.game.status}),u["default"].createElement(g["default"],{player:this.state.player,logger:this.state.logger}))}}]),t}(u["default"].Component);t["default"]=k},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function _(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:_(r,t,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},u=n(5),c=i(u),f=n(1),h=500,p=10,y="Mireluk Queen",d=function(e){function t(e){r(this,t);var n=a(this,Object.getPrototypeOf(t).call(this,e,y,p));return n.type=f.EntityType.boss,n.health=h,n}return o(t,e),s(t,[{key:"die",value:function(){l(Object.getPrototypeOf(t.prototype),"die",this).call(this),this._game.playerWin()}}]),t}(c["default"]);t["default"]=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(33),s=i(o),l=n(8),u=function(){function e(t){r(this,e),this._game=t;var n=new s["default"].js;n.setGrid(this._getGridForEasystar()),n.setAcceptableTiles([l.TileType.open]),this._easystar=n}return a(e,[{key:"findPathToPlayer",value:function(e,t){var n=this._game.player;this._easystar.findPath(e.x,e.y,n.x,n.y,t),this._easystar.calculate()}},{key:"_getGridForEasystar",value:function(){for(var e=this._game.map,t=[],n=0;n<e.height;n++){t.push([]);for(var i=0;i<e.width;i++)t[n][i]=e.getTile(i,n).type}return t}}]),e}();t["default"]=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function g(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:g(r,t,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},u=n(6),c=i(u),f=n(1),h="The Hero",p=4,y=100,d=25,_=function(e){function t(e){r(this,t);var n=e.map.getRandomEmptyTile(),i=a(this,Object.getPrototypeOf(t).call(this,e,h,f.EntityType.player,n,p,1));return i.xp=0,i.health=y,i._weapon=null,i._markTilesExplored(),i}return o(t,e),s(t,[{key:"move",value:function(e,n){l(Object.getPrototypeOf(t.prototype),"move",this).call(this,e,n),this._markTilesExplored()}},{key:"addXP",value:function(e){this.xp+=e,this.xp>=this.nextLevelXP&&this.level++}},{key:"die",value:function(){this._game.storeMessage("\n"+this.name+" falls to the ground.\nYou realize that evil will always triumph because good is dumb.\nFade to black."),this._game.playerDie()}},{key:"pickupWeapon",value:function(e){!this._weapon||e.damage>this._weapon.damage?(this._weapon=e,this._game.storeMessage("WEAPON: Equipping '"+e.name+"' with base damage "+e.damage)):this._game.storeMessage("WEAPON: The weapon '"+e.name+"' is worse than your current weapon.  It is hurled into the bushes")}},{key:"pickupPotion",value:function(e){this.health+=e.restoresHealth,this._game.storeMessage("HEALTH: Found a "+e.name+".  Restored "+e.restoresHealth+" health!")}},{key:"isTileVisible",value:function(e){var t=this.x-e.x,n=this.y-e.y,i=Math.sqrt(Math.pow(t,2)+Math.pow(n,2));return i<=this.range}},{key:"isTileInRange",value:function(e){return e.distanceTo(this.tile)<=this.range}},{key:"_interactWithEntity",value:function(e){if(e.isEnemy||e.isBoss){var t=this.attackDamage;return this.attack(e,t),e.isDead}return e.isWeapon?(this.pickupWeapon(e),!0):e.isPotion?(this.pickupPotion(e),!0):!1}},{key:"_markTilesExplored",value:function(){for(var e=this.x-this.range,t=this.x+this.range,n=this.y-this.range,i=this.y+this.range,r=this._game.map,a=e;t>=a;a++)for(var o=n;i>=o;o++){var s=r.getTile(a,o);s&&s.distanceTo(this.tile)<=this.range&&s.setExplored()}}},{key:"weaponName",get:function(){return this._weapon?this._weapon.name:"Sweaty Palms"}},{key:"maxDamage",get:function(){return this._weapon?this._weapon.damage*this.level:this.level}},{key:"nextLevelXP",get:function(){return this.level*d}},{key:"bossXPosition",get:function(){return this._game.boss.x}},{key:"bossYPosition",get:function(){return this._game.boss.y}}]),t}(c["default"]);t["default"]=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),l=i(s),u=40,c=function(e){function t(e){r(this,t);var n=e.map.getRandomEmptyTile(),i=a(this,Object.getPrototypeOf(t).call(this,e,"Health Potion",s.EntityType.potion,n));return i.restoresHealth=u,i}return o(t,e),t}(l["default"]);c.createRandom=function(e){return new c(e)},t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(1),u=i(l),c=function(e){function t(e,n,i){r(this,t);var o=e.map.getRandomEmptyTile(),s=a(this,Object.getPrototypeOf(t).call(this,e,n,l.EntityType.weapon,o));return s._damage=i,s}return o(t,e),s(t,[{key:"damage",get:function(){return this._damage}}]),t}(u["default"]),f=[{name:"Claw of Death",damage:10},{name:"Rubber Chicken",damage:2},{name:"Pecan Pie",damage:3},{name:"Ninja Star",damage:4},{name:"Some sort of gun",damage:5},{name:"Fancy Pants",damage:4},{name:"The Deathinator",damage:10},{name:"Doombringer",damage:8},{name:"Beehive",damage:3},{name:"Hurtful Words",damage:2}];c.createRandom=function(e){var t=f[Math.floor(Math.random()*f.length)];return new c(e,t.name,t.damage)},t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(8),s=i(o),l=n(1),u=40,c=4,f=3,h=function(){function e(t,n,i){r(this,e),this._game=t,this._tiles=null,this._width=n,this._height=i,this._init()}return a(e,[{key:"_init",value:function(){this._randomFillMap(),this._permuteMap()}},{key:"_randomFillMap",value:function(){for(var e=new Array(this.width),t=0;t<this.width;t++){e[t]=new Array(this.height);for(var n=0;n<this.height;n++){var i=Math.floor(100*Math.random()+1)<u;this._isBorder(t,n)&&(i=!0),e[t][n]=new s["default"](t,n,i?o.TileType.wall:o.TileType.open)}}this._tiles=e}},{key:"_permuteMapIteration",value:function(e,t){for(var n=new Array(this.width),i=0;i<this.width;i++){n[i]=new Array(this.height);for(var r=0;r<this._height;r++){var a=this._numWallsSurroundingTile(i,r,1),s=this._numWallsSurroundingTile(i,r,2),l=void 0;l=a>=e?o.TileType.wall:t&&t>=s?o.TileType.wall:o.TileType.open,n[i][r]=l}}for(var u=0;u<this.width;u++)for(var c=0;c<this.height;c++)this._tiles[u][c].type=n[u][c]}},{key:"_permuteMap",value:function(){for(var e=0;c>e;e++)this._permuteMapIteration(5,2);for(var t=0;f>t;t++)this._permuteMapIteration(5,null)}},{key:"_isBorder",value:function(e,t){return 0===e||0===t||e===this.width-1||t===this.height-1}},{key:"_isWall",value:function(e,t){return 0>e||0>t||e>=this.width||t>=this.height?!0:this._tiles[e][t].isWall}},{key:"_numWallsSurroundingTile",value:function(e,t,n){for(var i=0,r=e-n;e+n>=r;r++)for(var a=t-n;t+n>=a;a++)r===e&&a===t||this._isWall(r,a)&&i++;return i}},{key:"getTile",value:function(e,t){return 0>e||0>t||e>=this.width||t>=this.height?null:this._tiles[e][t]}},{key:"getRandomEmptyTile",value:function(){var e=null,t=0;do{var n=Math.floor(Math.random()*this.width),i=Math.floor(Math.random()*this.height),r=this.getTile(n,i);r.isOpen&&!r.hasEntity&&(this._game.player?this._game.player.isTileInRange(r)||(e=r):e=r),t++}while(!e&&20>t);return e}},{key:"toString",value:function(){for(var e="",t=0;t<this.height;t++){for(var n=0;n<this.width;n++){var i=this._tiles[n][t].type,r=this._tiles[n][t].entity;i===o.TileType.wall&&(e+="#"),i===o.TileType.open&&(e+=r?r.type===l.EntityType.player?"@":r.type===l.EntityType.enemy?"?":r.type===l.EntityType.boss?"!":r.type===l.EntityType.weapon?"$":r.type===l.EntityType.potion?"*":"x":".")}e+="\n"}return e}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),e}();t["default"]=h},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){n(this,e),this._entity=t}return i(e,[{key:"x",get:function(){return this._entity.x}},{key:"y",get:function(){return this._entity.y}}]),e}();t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=35,a=35,o=10,s=10,l=function(){function e(t,i,r){n(this,e),this._game=t,this._camera=r,this.mapWidth=i.width,this.mapHeight=i.height,this.width=null,this.height=null,this.xMin=null,this.xMax=null,this.yMin=null,this.yMax=null,this.width=o,this.height=s,this.update()}return i(e,[{key:"setSize",value:function(e,t){this.width=Math.floor((e-20)/r),this.height=Math.floor((t-20)/a),this.update()}},{key:"update",value:function(){this.xMin=this._camera.x-Math.floor(this.width/2),this.xMax=this._camera.x+Math.ceil(this.width/2)-1,this.xMin<=0?(this.xMin=0,this.xMax=Math.min(this.mapWidth-1,this.width-1)):this.xMax>=this.mapWidth-1&&(this.xMax=this.mapWidth-1,this.xMin=Math.max(0,this.mapWidth-this.width)),this.yMin=this._camera.y-Math.floor(this.height/2),this.yMax=this._camera.y+Math.ceil(this.height/2)-1,this.yMin<=0?(this.yMin=0,this.yMax=Math.min(this.mapHeight-1,this.height-1)):this.yMax>=this.mapHeight-1&&(this.yMax=this.mapHeight-1,this.yMin=Math.max(0,this.mapHeight-this.height))}}]),e}();t["default"]=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){n(this,e),this._game=t,this._messages=[],this._messageString=""}return i(e,[{key:"storeMessage",value:function(e){this._messages.push(e),this._updateMessageString()}},{key:"_updateMessageString",value:function(){var e="";this._messages.forEach(function(t){e+=t+"\n"}),this._messageString=e}},{key:"messages",get:function(){return this._messageString}}]),e}();t["default"]=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){n(this,e),this._game=t}return i(e,[{key:"tick",value:function(){this._game.isPlaying&&this._game._enemyList.forEach(function(e){return e.move()})}}]),e}();t["default"]=r},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,".footer{display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-flex:0 0 260px;-ms-flex:0 0 260px;flex:0 0 260px;overflow:hidden}",""])},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,".map{-webkit-flex:1;-ms-flex:1;flex:1;position:relative;overflow:hidden;background-color:#000;text-align:center;border:5px solid #aaa;border-radius:10px;padding:10px;margin-bottom:5px}.map-modal{font-family:Courier New;color:#fff;position:absolute;left:0;right:0;margin-left:auto;margin-right:auto;z-index:9999}",""])},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,".messagebox{-webkit-flex:4 0 700px;-ms-flex:4 0 700px;flex:4 0 700px;height:250px;background-color:#000;border:5px solid #aaa;border-radius:10px}.messagebox textarea{font-family:Courier New;background-color:#000;box-sizing:border-box;color:#fff;font-size:14px;width:100%;height:100%;padding:10px;border:none;resize:none;overflow-y:scroll}",""])},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,".stats-box{-webkit-flex:1 0 250px;-ms-flex:1 0 250px;flex:1 0 250px;height:250px;background-color:#000;border:5px solid #aaa;border-radius:10px;font-family:Courier New;margin-right:5px}.stats-box ul{list-style-type:none;font-size:20px;font-weight:700;color:#fff;padding:10px;margin:10px 0 0}.stats-box li{padding:2px}",""])},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,".tile{background-color:#000;font-family:Courier New;font-size:30px;width:35px;height:35px;display:inline-block}.unexplored{background-color:#1a1a1a}.wall{color:peru}.open{color:#fff}.player{color:green}.enemy{color:orange}.boss{color:red}.weapon{color:#ff0}.potion{color:blue}",""])},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,"body,html{height:100%;margin:0}body{background-color:#000}#root,.roguelike{height:100%}.roguelike{display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column}",""])},function(e,t,n){var i,r,a=a||{};i=[],r=function(){return a}.apply(t,i),!(void 0!==r&&(e.exports=r)),"undefined"!=typeof e&&e.exports&&(e.exports=a),a.Node=function(e,t,n,i,r){this.parent=e,this.x=t,this.y=n,this.costSoFar=i,this.simpleDistanceToTarget=r,this.bestGuessDistance=function(){return this.costSoFar+this.simpleDistanceToTarget}},a.Node.OPEN_LIST=0,a.Node.CLOSED_LIST=1,a.PriorityQueue=function(e,t){this.length=0;var n=[],i=!1;if(t==a.PriorityQueue.MAX_HEAP)i=!0;else{if(t!=a.PriorityQueue.MIN_HEAP)throw t+" not supported.";i=!1}this.insert=function(t){if(!t.hasOwnProperty(e))throw"Cannot insert "+t+" because it does not have a property by the name of "+e+".";n.push(t),this.length++,r(this.length-1)},this.getHighestPriorityElement=function(){return n[0]},this.shiftHighestPriorityElement=function(){if(0===this.length)throw"There are no more elements in your priority queue.";if(1===this.length){var e=n[0];return n=[],this.length=0,e}var t=n[0],i=n.pop();return this.length--,n[0]=i,o(0),t};var r=function(e){if(0!==e){var t=u(e);l(e,t)&&(s(e,t),r(t))}},o=function(e){var t=c(e),n=f(e);if(l(t,e))s(e,t),o(t);else if(l(n,e))s(e,n),o(n);else{if(0==e)return;o(0)}},s=function(e,t){var i=n[e];n[e]=n[t],n[t]=i},l=function(t,r){if(void 0===n[r]||void 0===n[t])return!1;var a,o;return"function"==typeof n[t][e]?(a=n[t][e](),o=n[r][e]()):(a=n[t][e],o=n[r][e]),i?a>o:o>a},u=function(e){return Math.floor((e-1)/2)},c=function(e){return 2*e+1},f=function(e){return 2*e+2}},a.PriorityQueue.MAX_HEAP=0,a.PriorityQueue.MIN_HEAP=1,a.instance=function(){this.isDoneCalculating=!0,this.pointsToAvoid={},this.startX,this.callback,this.startY,this.endX,this.endY,this.nodeHash={},this.openList},a.js=function(){var e,t,n,i=1,r=1.4,o=!1,s={},l={},u={},c=!0,f=[],h=Number.MAX_VALUE,p=!1;this.setAcceptableTiles=function(e){e instanceof Array?n=e:!isNaN(parseFloat(e))&&isFinite(e)&&(n=[e])},this.enableSync=function(){o=!0},this.disableSync=function(){o=!1},this.enableDiagonals=function(){p=!0},this.disableDiagonals=function(){p=!1},this.setGrid=function(t){e=t;for(var n=0;n<e.length;n++)for(var i=0;i<e[0].length;i++)l[e[n][i]]||(l[e[n][i]]=1)},this.setTileCost=function(e,t){l[e]=t},this.setAdditionalPointCost=function(e,t,n){u[e+"_"+t]=n},this.removeAdditionalPointCost=function(e,t){delete u[e+"_"+t]},this.removeAllAdditionalPointCosts=function(){u={}},this.setIterationsPerCalculation=function(e){h=e},this.avoidAdditionalPoint=function(e,t){s[e+"_"+t]=1},this.stopAvoidingAdditionalPoint=function(e,t){delete s[e+"_"+t]},this.enableCornerCutting=function(){c=!0},this.disableCornerCutting=function(){c=!1},this.stopAvoidingAllAdditionalPoints=function(){s={}},this.findPath=function(t,r,s,l,u){var c=function(e){o?u(e):setTimeout(function(){u(e)})};if(void 0===n)throw new Error("You can't set a path without first calling setAcceptableTiles() on EasyStar.");if(void 0===e)throw new Error("You can't set a path without first calling setGrid() on EasyStar.");if(0>t||0>r||0>s||0>s||t>e[0].length-1||r>e.length-1||s>e[0].length-1||l>e.length-1)throw new Error("Your start or end point is outside the scope of your grid.");if(t===s&&r===l)return void c([]);for(var h=e[l][s],p=!1,y=0;y<n.length;y++)if(h===n[y]){p=!0;break}if(p===!1)return void c(null);var d=new a.instance;d.openList=new a.PriorityQueue("bestGuessDistance",a.PriorityQueue.MIN_HEAP),d.isDoneCalculating=!1,d.nodeHash={},d.startX=t,d.startY=r,d.endX=s,d.endY=l,d.callback=c,d.openList.insert(g(d,d.startX,d.startY,null,i)),f.push(d)},this.calculate=function(){if(0!==f.length&&void 0!==e&&void 0!==n)for(t=0;h>t;t++){if(0===f.length)return;if(o&&(t=0),0!==f[0].openList.length){var s=f[0].openList.shiftHighestPriorityElement(),l=[];s.list=a.Node.CLOSED_LIST,s.y>0&&l.push({instance:f[0],searchNode:s,x:0,y:-1,cost:i*_(s.x,s.y-1)}),s.x<e[0].length-1&&l.push({instance:f[0],searchNode:s,x:1,y:0,cost:i*_(s.x+1,s.y)}),s.y<e.length-1&&l.push({instance:f[0],searchNode:s,x:0,y:1,cost:i*_(s.x,s.y+1)}),s.x>0&&l.push({instance:f[0],searchNode:s,x:-1,y:0,cost:i*_(s.x-1,s.y)}),p&&(s.x>0&&s.y>0&&(c||d(e,n,s.x,s.y-1)&&d(e,n,s.x-1,s.y))&&l.push({instance:f[0],searchNode:s,x:-1,y:-1,cost:r*_(s.x-1,s.y-1)}),s.x<e[0].length-1&&s.y<e.length-1&&(c||d(e,n,s.x,s.y+1)&&d(e,n,s.x+1,s.y))&&l.push({instance:f[0],searchNode:s,x:1,y:1,cost:r*_(s.x+1,s.y+1)}),s.x<e[0].length-1&&s.y>0&&(c||d(e,n,s.x,s.y-1)&&d(e,n,s.x+1,s.y))&&l.push({instance:f[0],searchNode:s,x:1,y:-1,cost:r*_(s.x+1,s.y-1)}),s.x>0&&s.y<e.length-1&&(c||d(e,n,s.x,s.y+1)&&d(e,n,s.x-1,s.y))&&l.push({instance:f[0],searchNode:s,x:-1,y:1,cost:r*_(s.x-1,s.y+1)})),l.sort(function(e,t){var n=e.cost+v(s.x+e.x,s.y+e.y,f[0].endX,f[0].endY),i=t.cost+v(s.x+t.x,s.y+t.y,f[0].endX,f[0].endY);return i>n?-1:n===i?0:1});for(var u=!1,g=0;g<l.length;g++)if(y(l[g].instance,l[g].searchNode,l[g].x,l[g].y,l[g].cost),l[g].instance.isDoneCalculating===!0){u=!0;break}u&&f.shift()}else{var m=f[0];m.callback(null),f.shift()}}};var y=function(t,i,r,o,l){var u=i.x+r,c=i.y+o;if(void 0===s[u+"_"+c]){if(t.endX===u&&t.endY===c){t.isDoneCalculating=!0;var f=[],h=0;f[h]={x:u,y:c},h++,f[h]={x:i.x,y:i.y},h++;for(var p=i.parent;null!=p;)f[h]={x:p.x,y:p.y},h++,p=p.parent;f.reverse();var y=t,_=f;return void y.callback(_)}if(d(e,n,u,c)){var v=g(t,u,c,i,l);void 0===v.list?(v.list=a.Node.OPEN_LIST,t.openList.insert(v)):v.list===a.Node.OPEN_LIST&&i.costSoFar+l<v.costSoFar&&(v.costSoFar=i.costSoFar+l,v.parent=i)}}},d=function(e,t,n,i){for(var r=0;r<t.length;r++)if(e[i][n]===t[r])return!0;return!1},_=function(t,n){return u[t+"_"+n]||l[e[n][t]]},g=function(e,t,n,i,r){if(void 0!==e.nodeHash[t+"_"+n])return e.nodeHash[t+"_"+n];var o=v(t,n,e.endX,e.endY);if(null!==i)var s=i.costSoFar+r;else s=o;var l=new a.Node(i,t,n,s,o);return e.nodeHash[t+"_"+n]=l,l},v=function(e,t,n,i){return Math.sqrt((n-=e)*n+(i-=t)*i)}}},function(e,t,n){var i=n(27);"string"==typeof i&&(i=[[e.id,i,""]]);n(4)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(28);"string"==typeof i&&(i=[[e.id,i,""]]);n(4)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(29);"string"==typeof i&&(i=[[e.id,i,""]]);n(4)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(30);"string"==typeof i&&(i=[[e.id,i,""]]);n(4)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(31);"string"==typeof i&&(i=[[e.id,i,""]]);n(4)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(32);"string"==typeof i&&(i=[[e.id,i,""]]);n(4)(i,{});i.locals&&(e.exports=i.locals)}]);